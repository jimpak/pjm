<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.7.0.min.js" integrity="sha256-2Pmvv0kuTBOenSvLm6bvfBSSHrUJ+3A7x6P5Ebd07/g=" crossorigin="anonymous"></script>
</head>
<body>
    <div class="card-group container">
        <div class="card">
            <img src="https://via.placeholder.com/600">
            <div class="card-body">
                <h5>Card title</h5>
                <p>가격 : 70000</p>
                <button class="btn btn-danger">주문하기</button>
            </div>
        </div>
        <div class="card">
            <img src="https://via.placeholder.com/600">
            <div class="card-body">
                <h5>Card title</h5>
                <p>가격 : 70000</p>
                <button class="btn btn-danger">주문하기</button>
            </div>
        </div>
        <div class="card">
            <img src="https://via.placeholder.com/600">
            <div class="card-body">
                <h5>Card title</h5>
                <p>가격 : 70000</p>
                <button class="btn btn-danger">주문하기</button>
            </div>
        </div>
    </div>

    <script>
        // var products = [
        //     { id : 0, price : 70000, title : 'Blossom Dress' },
        //     { id : 1, price : 50000, title : 'Springfield Shirt' },
        //     { id : 2, price : 60000, title : 'Black Monastery' }
        // ];

        // for(let i = 0; i<products.length; i++) {
        //     cardChange(i);
        // }

        // function cardChange(num) {
        //     $('.card-body h5').eq(num).html(products[num].title);
        //     $('.card-body p').eq(num).html(products[num].price);
        // }

        // console.log(1+3) //4
        // console.log(1+"3") // 13

        // var a = "개발자";

        // console.log("문자" + a + "문자"); // 문자개발자문자

        // console.log(`문자 ${a} 문자`); // 문자 개발자 문자

        // $.get("요청할 url");   //get 요청 방법

        $.get('https://korea-webtoon-api.herokuapp.com/')
        .done(function (data){
            console.log(data);  //요청이 완료되면 동작할 코드
            var webtoons = data.webtoons;
            console.log(webtoons);
            for (let i=0; i<webtoons.length; i++) {   
                webtoonCardChange(i,webtoons);
            }
            
            // webtoons.forEach(function (toon, i) {
            //     webtoonCardChange(i,webtoons);
            // })
        }).fail(function (error){
            console.log(error); //요청이 실패했을 때  동작할 코드 
        }).always(function (){
            console.log("test"); //성공 실패에 관계없이 항상 동작할 코드 
        })

        function webtoonCardChange(i,webtoons) {
            // 1. 이미지 바꾸기
            $('.card img').eq(i).attr("src", webtoons[i].img);
            // 2. 타이틀 바꾸기
            $('.card-body h5').eq(i).html(webtoons[i].title);
            $('.card-body p').eq(i).html(webtoons[i].author);
            // 3. 타이틀 클릭 시 url 이동
            $('.card-body .btn').eq(i).on('click', function() {
                $(location).attr('href', webtoons[i].url); 
                console.log(webtoons[i].url)
            })
        }

        // fetch('https://korea-webtoon-api.herokuapp.com/search?keyword=쿠베라')
        //     .then(res => res.json())
        //     .then(function(data){
        //     console.log(data)
        // })
        // .catch(function(error){
        //     console.log('실패함')
        // });

    </script>
</body>
</html>